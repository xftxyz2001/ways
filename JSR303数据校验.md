## JSR303数据校验

### 1.JSR303是什么
JSR303是Java规范中定义的一套用于数据校验的标准，它提供了一种简单而强大的方式来验证数据的合法性。在Java Web开发中，我们经常需要对用户提交的数据进行校验，以确保数据的有效性和安全性。JSR303提供了一套注解，我们可以通过在实体类的字段上添加这些注解来实现数据校验。


### 2.为什么要使用JSR303
1. **代码简洁**：使用 JSR303 可以将数据校验的逻辑从业务代码中分离出来，使代码更加简洁和易于维护。我们只需要在实体类的字段上添加相应的注解，就可以定义校验规则，而不需要编写大量的校验代码。
2. **统一校验规则**：通过使用 JSR 303，我们可以定义一套统一的校验规则，这样可以确保所有的数据校验都遵循相同的规范。这对于多个模块或团队共同开发的项目尤为重要，可以避免各自实现不一致的校验逻辑。
3. **前后端校验一致**：JSR 303支持在前端和后端都进行数据校验。前端可以使用JavaScript框架如jQuery Validation等进行校验，后端可以使用Java框架如SpringMVC等进行校验。这样可以确保前后端的校验规则一致，提高系统的安全性和用户体验。
4. **可扩展性**：JSR 303提供了一套标准的校验注解，但也支持自定义注解和校验器。我们可以根据项目的需求，自定义一些特定的校验规则，以满足业务的特殊需求。


### 3.常用注解
| 布尔值校验相关注解 | 注解作用说明              |
| ------------------ | ------------------------- |
| @AssertFalse       | 被注解的元素必须为false。 |
| @AssertTrue        | 被注解的元素必须为true。  |

| 数值范围校验相关注解 | 注解作用说明                             |
| -------------------- | ---------------------------------------- |
| @DecimalMax          | 数值类型的元素必须小于等于指定的最大值。 |
| @DecimalMin          | 数值类型的元素必须大于等于指定的最小值。 |
| @Max                 | 数值类型的元素必须小于等于指定的最大值。 |
| @Min                 | 数值类型的元素必须大于等于指定的最小值。 |
| @Negative            | 数值类型的元素必须是负数（小于0）。      |
| @NegativeOrZero      | 数值类型的元素必须是负数或零。           |
| @Positive            | 数值类型的元素必须是正数（大于0）。      |
| @PositiveOrZero      | 数值类型的元素必须是正数或零。           |

| 日期时间校验相关注解 | 注解作用说明                                             |
| -------------------- | -------------------------------------------------------- |
| @Future              | 日期、时间类型的元素必须在未来的时间点之后。             |
| @FutureOrPresent     | 日期、时间类型的元素必须在当前时间点或未来的时间点之后。 |
| @Past                | 日期、时间类型的元素必须在过去的时间点之前。             |
| @PastOrPresent       | 日期、时间类型的元素必须在过去的时间点或当前时间点之前。 |

| 字符序列和集合大小校验相关注解 | 注解作用说明                                                             |
| ------------------------------ | ------------------------------------------------------------------------ |
| @Size                          | 字符序列（如字符串）长度或者集合大小必须在指定的边界范围内（包括边界）。 |
| @NotBlank                      | 字符序列类型的元素不能为null且至少包含一个非空白字符。                   |
| @NotEmpty                      | 字符序列、集合等类型的元素不能为空也不可为null。                         |

| 特殊格式校验相关注解 | 注解作用说明                                 |
| -------------------- | -------------------------------------------- |
| @Email               | 字符串必须符合电子邮件地址的格式要求。       |
| @Pattern             | 字符序列类型的元素必须符合指定的正则表达式。 |

| 空值校验相关注解 | 注解作用说明       |
| ---------------- | ------------------ |
| @NotNull         | 元素必须不为null。 |
| @Null            | 元素必须为null。   |

`@Validated`和`@Valid`是Spring框架中用于数据校验的注解，它们的作用是对方法参数或方法返回值进行校验。尽管它们的功能相似，但在使用上有一些区别。
1. **适用范围：**
   - `@Valid`注解适用于方法参数和方法返回值的校验。
   - `@Validated`注解适用于方法参数的校验。

2. **校验器的选择：**
   - `@Valid`注解使用的是Java Bean Validation（JSR 380）规范定义的校验器，例如Hibernate Validator。
   - `@Validated`注解使用的是Spring框架自带的校验器，例如Spring Validator。

3. **分组校验：**
   - `@Valid`注解支持分组校验，可以根据不同的校验场景选择不同的校验规则。
   - `@Validated`注解不支持分组校验，只能使用默认的校验规则。

4. **错误处理：**
   - `@Valid`注解的校验错误会被封装成`MethodArgumentNotValidException`或`ConstraintViolationException`异常，并由全局异常处理器进行处理。
   - `@Validated`注解的校验错误会被封装成`BindException`或`ConstraintViolationException`异常，并由全局异常处理器进行处理。


---
- [JSR 303: Bean Validation](https://beanvalidation.org/1.0/spec/)
- [阿里云社区-SpringMVC之JSR303和拦截器](https://developer.aliyun.com/article/1359591)

